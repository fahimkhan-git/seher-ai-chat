<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Widget with Manual Init Fix</title>
</head>
<body>
    <h1>Widget Test - Manual Init</h1>
    <p>If auto-init doesn't work, this page manually initializes the widget.</p>
    
    <!-- Widget Script -->
    <script 
      src="https://widget-eight-ebon-5f0drzerp-fahimkhan-gits-projects.vercel.app/widget.js"
      data-project="5796"
      data-api-base-url="https://api-4oq41g49f-fahimkhan-gits-projects.vercel.app"
      data-microsite="manual-init-test"
      async>
    </script>
    
    <!-- Manual Initialization Fallback -->
    <script>
      // Wait for widget to load, then initialize
      function initializeWidget() {
        if (window.HomesfyChat) {
          console.log('Manually initializing widget...');
          window.HomesfyChat.init().then(() => {
            console.log('✅ Widget initialized successfully!');
          }).catch((error) => {
            console.error('❌ Widget initialization failed:', error);
          });
        } else {
          console.log('Waiting for widget to load...');
          setTimeout(initializeWidget, 500);
        }
      }
      
      // Try to initialize after page loads
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() {
          setTimeout(initializeWidget, 1000);
        });
      } else {
        setTimeout(initializeWidget, 1000);
      }
      
      // Also try on window load
      window.addEventListener('load', function() {
        setTimeout(initializeWidget, 500);
      });
    </script>
</body>
</html>

